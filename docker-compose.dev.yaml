services:
  hytale-server:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: hytale-server-dev
    restart: unless-stopped
    volumes:
      - ./data:/data
    environment:
      # Server configuration
      SERVER_NAME: "Hytale Dev Server"
      PORT: "5520"
      PATCHLINE: "release"  # Options: release, beta, alpha
      
      # Server settings
      MOTD: ""  # Message of the day
      PASSWORD: ""  # Server password (empty = no password)
      MAX_PLAYERS: "100"
      MAX_VIEW_RADIUS: "32"
      
      # Container behavior
      UPDATE_ON_STARTUP: "false"  # Set to false for faster dev restarts
      REFRESH_INTERVAL: "10"  # Token refresh interval in seconds (dev: 10s, prod: 86400s)
      
      # Backup settings
      BACKUPS_ENABLED: "true"  # Enable automatic backups
      BACKUP_DIR: "/data/backups"  # Directory to store backups
      BACKUP_FREQUENCY: "30"  # Backup frequency in minutes
      BACKUP_MAX_COUNT: "5"  # Maximum number of backups to keep
      
      # User/Group IDs
      # PUID: "1000"
      # PGID: "1000"
      
      # Log filtering (pipe-separated regex patterns)
      # LOG_FILTERS: "ERROR.*connection timeout|DEBUG.*verbose"
    
    stdin_open: true
    tty: true
